{"ast":null,"code":"import _asyncToGenerator from \"/Users/ybezeha/WebstormProjects/new-project/node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { request as defaultRequest } from \"@octokit/request\";\nimport btoa from \"btoa-lite\";\nfunction resetToken(_x) {\n  return _resetToken.apply(this, arguments);\n}\nfunction _resetToken() {\n  _resetToken = _asyncToGenerator(function* (options) {\n    const request = options.request || /* istanbul ignore next: we always pass a custom request in tests */\n    defaultRequest;\n    const auth = btoa(`${options.clientId}:${options.clientSecret}`);\n    const response = yield request(\"PATCH /applications/{client_id}/token\", {\n      headers: {\n        authorization: `basic ${auth}`\n      },\n      client_id: options.clientId,\n      access_token: options.token\n    });\n    const authentication = {\n      clientType: options.clientType,\n      clientId: options.clientId,\n      clientSecret: options.clientSecret,\n      token: response.data.token,\n      scopes: response.data.scopes\n    };\n    if (response.data.expires_at) authentication.expiresAt = response.data.expires_at;\n    if (options.clientType === \"github-app\") {\n      delete authentication.scopes;\n    }\n    return {\n      ...response,\n      authentication\n    };\n  });\n  return _resetToken.apply(this, arguments);\n}\nexport { resetToken };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}