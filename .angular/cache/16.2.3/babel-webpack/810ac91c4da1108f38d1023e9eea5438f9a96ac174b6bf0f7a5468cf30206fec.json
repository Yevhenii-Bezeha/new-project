{"ast":null,"code":"import _asyncToGenerator from \"/Users/ybezeha/WebstormProjects/new-project/node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { RequestError } from \"@octokit/request-error\";\nfunction requestToOAuthBaseUrl(request) {\n  const endpointDefaults = request.endpoint.DEFAULTS;\n  return /^https:\\/\\/(api\\.)?github\\.com$/.test(endpointDefaults.baseUrl) ? \"https://github.com\" : endpointDefaults.baseUrl.replace(\"/api/v3\", \"\");\n}\nfunction oauthRequest(_x, _x2, _x3) {\n  return _oauthRequest.apply(this, arguments);\n}\nfunction _oauthRequest() {\n  _oauthRequest = _asyncToGenerator(function* (request, route, parameters) {\n    const withOAuthParameters = {\n      baseUrl: requestToOAuthBaseUrl(request),\n      headers: {\n        accept: \"application/json\"\n      },\n      ...parameters\n    };\n    const response = yield request(route, withOAuthParameters);\n    if (\"error\" in response.data) {\n      const error = new RequestError(`${response.data.error_description} (${response.data.error}, ${response.data.error_uri})`, 400, {\n        request: request.endpoint.merge(route, withOAuthParameters),\n        headers: response.headers\n      });\n      error.response = response;\n      throw error;\n    }\n    return response;\n  });\n  return _oauthRequest.apply(this, arguments);\n}\nexport { oauthRequest, requestToOAuthBaseUrl };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}